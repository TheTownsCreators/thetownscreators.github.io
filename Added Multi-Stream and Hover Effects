<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheTownsRP.TV | Multi-Stream Theater</title>
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #111111;
            --accent-red: #FF4444;
            --text-main: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Segoe UI', sans-serif;
            margin: 0; padding: 20px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #222;
            transition: 0.3s;
        }

        .feature-card:hover { border-color: var(--accent-red); transform: translateY(-5px); }

        /* THE NEW HOVER EFFECT */
        .stream-card { 
            position: relative; 
            background: var(--card-bg); 
            border-radius: 8px; 
            overflow: hidden; 
            cursor: pointer; 
        }

        .stream-card::after {
            content: "+ Add to Multi-Stream";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 68, 68, 0.9);
            color: white;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; opacity: 0; transition: 0.3s; z-index: 10;
        }

        .stream-card:hover::after { opacity: 1; }

        .video-container { aspect-ratio: 16/9; background: #000; }

        #main-stage {
            display: none;
            margin-bottom: 40px;
            background: #000;
            border: 2px solid var(--accent-red);
            padding: 15px;
            border-radius: 8px;
        }

        #theater-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(45%, 1fr));
            gap: 15px;
        }
    </style>
</head>
<body>

    <div class="feature-grid">
        <div class="feature-card" onclick="toggleTheater()" style="cursor: pointer;">
            <div style="font-size: 50px;">ðŸ“º</div>
            <h3>Multi-Stream</h3>
            <p>Click here to open the theater stage!</p>
        </div>
    </div>

    <div id="main-stage">
        <div id="theater-container"></div>
        <button onclick="clearTheater()" style="margin-top: 10px; padding: 10px; cursor: pointer;">Clear All Streams</button>
    </div>

    <div class="feature-grid" id="streamer-grid"></div>

    <script>
        const streamers = [
            { user: "indiya", platform: "kick", game: "RP" },
            { user: "vercetti", platform: "kick", game: "RP" }
        ];

        function renderCard(info) {
            const grid = document.getElementById('streamer-grid');
            const card = document.createElement('div');
            card.className = 'stream-card';
            card.onclick = () => addToTheater(info.user, info.platform);

            card.innerHTML = `
                <div class="video-container">
                    <iframe src="https://player.kick.com/${info.user}?autoplay=false&muted=true" height="100%" width="100%" frameborder="0"></iframe>
                </div>
                <div style="padding: 10px;"><strong>${info.user}</strong></div>
            `;
            grid.appendChild(card);
        }

        function toggleTheater() {
            const stage = document.getElementById('main-stage');
            stage.style.display = 'block';
            stage.scrollIntoView({ behavior: 'smooth' });
        }

        function addToTheater(user, platform) {
            const container = document.getElementById('theater-container');
            document.getElementById('main-stage').style.display = 'block';
            
            if (document.getElementById(`theater-${user}`)) return;

            const wrapper = document.createElement('div');
            wrapper.id = `theater-${user}`;
            wrapper.innerHTML = `<iframe src="https://player.kick.com/${user}?autoplay=true" height="300px" width="100%" frameborder="0"></iframe>`;
            container.appendChild(wrapper);
        }

        function clearTheater() {
            document.getElementById('theater-container').innerHTML = '';
            document.getElementById('main-stage').style.display = 'none';
        }

        streamers.forEach(renderCard);
    </script>
</body>
</html>
